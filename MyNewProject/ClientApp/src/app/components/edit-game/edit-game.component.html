
<h1>Edit Game</h1>

<form #g="ngForm" (ngSubmit)="updateGame(g.value.release)">

  <div class="form-group">
    <label for="name">Name</label>
    <input [(ngModel)]="game.name" name="name" id="name" class="form-control" value="{{game.name}}" required minlength="2" maxlength="255" #gameName="ngModel" />
  </div>
  <div class="alert alert-danger" *ngIf="gameName.touched && !gameName.valid">
    <div *ngIf="gameName.errors.required">name is required</div>
    <div *ngIf="gameName.errors.minlength">length of the name should be at least {{gameName.errors.minlength.requiredLength}} characters</div>
  </div>

  <div class="form-group">
    <label for="developer">Developer</label>
    <input [(ngModel)]="game.developer" name="developer" id="developer" class="form-control" value="{{game.developer}}" required minlength="2" maxlength="255" #gameDeveloper="ngModel" />
  </div>
  <div class="alert alert-danger" *ngIf="gameDeveloper.touched && !gameDeveloper.valid">
    <div *ngIf="gameDeveloper.errors.required">developer is required</div>
    <div *ngIf="gameDeveloper.errors.minlength">length of the developer should be at least {{gameDeveloper.errors.minlength.requiredLength}} characters</div>
  </div>

  <div class="form-group">
    <label for="release">Release</label>
    <input [ngModel]="game.release | date:'yyyy-MM-dd'" type="text" name="release" id="release" class="form-control" value="{{game.release | date:'yyyy-MM-dd'}}" required #gameRelease="ngModel" />
  </div>
  <div class="alert alert-danger" *ngIf="gameRelease.touched && !gameRelease.valid">
    <div *ngIf="gameRelease.errors.required">release date is required</div>
  </div>


  <h2>Genres</h2>
  <div class="form-check form-check-inline" *ngFor="let genre of genres">
    <input class="form-check-input" type="checkbox" name="genre{{genre.id}}" id="genre{{genre.id}}" [checked]="game.genres.includes(genre.id)" (change)="onGenresChange($event,genre.id)">
    <label class="form-check-label" for="genre{{genre.id}}">
      {{genre.name}}
    </label>
  </div>



  <h2>Platforms</h2>
  <div class="form-check form-check-inline" *ngFor="let platform of platforms">
    <input class="form-check-input" type="checkbox" name="platform{{platform.id}}" id="platform{{platform.id}}" [checked]="game.platforms.includes(platform.id)" (change)="onPlatformsChange($event,platform.id)">
    <label class="form-check-label" for="platform{{platform.id}}">
      {{platform.name}}
    </label>
  </div>

  <div class="container-flex">
    <button class="btn btn-primary" [routerLink]="['/games']" type="button">Back</button>
    <button class="btn btn-primary" [disabled]="!g.valid" type="submit">Save</button>
    <button class="btn btn-primary" (click)="notify()" type="button">Notify</button>
  </div>


  <!--<p>{{g.value | json}}</p>
  <p>{{game | json}}</p>-->
</form>



